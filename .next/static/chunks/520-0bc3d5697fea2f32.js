"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{135:function(e,t,n){n.r(t),n.d(t,{AuthGuard:function(){return l}});var r=n(7437),o=n(2624),i=n(6463),a=n(2265),s=n(7776);function l(e){let{children:t}=e,n=(0,i.useRouter)(),l=(0,i.usePathname)(),c=(0,i.useSearchParams)(),u=(0,o.LP)(),d=(0,a.useCallback)((e,t)=>{let n=new URLSearchParams(c.toString());return n.set(e,t),n.toString()},[c]);return(0,a.useEffect)(()=>{if(u.token)return;let e="/?".concat(d("returnTo",l));s.A.success("You're unauthorized. Please sign in to continue."),n.replace(e)},[u.token]),(0,r.jsx)(r.Fragment,{children:t})}},3205:function(e,t,n){n.r(t),n.d(t,{GuestGuard:function(){return s}});var r=n(7437),o=n(2624),i=n(6463),a=n(2265);function s(e){let{children:t}=e,n=(0,i.useRouter)(),s=(0,i.useSearchParams)().get("returnTo")||"/home",l=(0,o.LP)();return(0,a.useEffect)(()=>{l&&l.token&&n.replace(s)},[l.token]),(0,r.jsx)(r.Fragment,{children:t})}},9265:function(e,t,n){n.d(t,{a:function(){return r.AuthGuard}});var r=n(135);n(3205)},6631:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(7437),o=n(9343);function i(e){let{children:t,onSubmit:n,methods:i}=e;return(0,r.jsx)(o.RV,{...i,children:(0,r.jsx)("form",{onSubmit:n,children:t})})}},4054:function(e,t,n){n.d(t,{F:function(){return s}});var r=n(7437),o=n(9343),i=n(7799),a=n(9604);function s(e){let{name:t,label:n,helperText:s,hiddenLabel:l,placeholder:c,...u}=e,{control:d,setValue:h}=(0,o.Gc)();return(0,r.jsx)(o.Qr,{name:t,control:d,render:e=>{var o;let{field:l,fieldState:{error:d}}=e;return(0,r.jsx)(a.Z,{...l,id:"rhf-autocomplete-".concat(t),onChange:(e,n)=>h(t,n,{shouldValidate:!0}),value:null!==(o=l.value)&&void 0!==o?o:null,renderInput:e=>(0,r.jsx)(i.Z,{...e,label:n,variant:"outlined",placeholder:c,error:!!d,helperText:d?null==d?void 0:d.message:s,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}},inputProps:{...e.inputProps,autoComplete:"new-password",form:{autocomplete:"off"}}}),...u})}})}},9912:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(7437),o=n(9343),i=n(7799);function a(e){let{name:t,helperText:n,type:a,...s}=e,{control:l}=(0,o.Gc)();return(0,r.jsx)(o.Qr,{name:t,control:l,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,r.jsx)(i.Z,{...t,fullWidth:!0,type:a,value:"number"===a&&0===t.value?"":t.value,onChange:e=>{"number"===a?t.onChange(Number(e.target.value)):t.onChange(e.target.value)},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}},error:!!n,...s})}})}},172:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(7437),o=n(2265),i=n(1359),a=n(3755);let s=(0,o.forwardRef)((e,t)=>{let{icon:n,width:o=20,sx:s,...l}=e;return(0,r.jsx)(a.Z,{ref:t,component:i.JO,className:"component-iconify",icon:n,sx:{width:o,height:o,...s},...l})});s.displayName="Iconify";var l=s},581:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(2265);function o(e){let[t,n]=(0,r.useState)(!!e);return{value:t,onTrue:(0,r.useCallback)(()=>{n(!0)},[]),onFalse:(0,r.useCallback)(()=>{n(!1)},[]),onToggle:(0,r.useCallback)(()=>{n(e=>!e)},[]),setValue:n}}},1313:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2265);function o(){let[e,t]=(0,r.useState)(null);return{open:e,onOpen:(0,r.useCallback)(e=>{t(e.currentTarget)},[]),onClose:(0,r.useCallback)(()=>{t(null)},[]),setOpen:t}}},2533:function(e,t,n){n.d(t,{TZ:function(){return a},To:function(){return u},XP:function(){return c},bN:function(){return s},sS:function(){return l}});var r=n(8877),o=n(2624),i=n(6623);let a=async e=>{let{uuid:t}=e;try{let e=(0,o.LP)();return(await r.ZP.get("".concat(r.Hv.blog,"/").concat(t),{headers:{"Content-Type":"application/json",...e.Authorization}})).data}catch(e){if(i.IZ(e)){var n;throw console.error("Axios error:",(null===(n=e.response)||void 0===n?void 0:n.data)||e.message),Error("Failed to fetch blog data")}throw e}},s=async e=>{let{blogUuid:t,comment:n}=e;try{let e=JSON.stringify({blogUuid:t,comment:n}),i=(0,o.LP)();return(await r.ZP.post("".concat(r.Hv.blog,"/create-comment"),e,{headers:{"Content-Type":"application/json",...i.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},l=async e=>{let{status:t,titles:n,content:i}=e;try{let e=JSON.stringify({status:t,titles:n,content:i}),a=(0,o.LP)();return(await r.ZP.post("".concat(r.Hv.blog),e,{headers:{"Content-Type":"application/json",...a.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},c=async e=>{let{status:t,titles:n,content:i,uuid:a}=e;try{let e=JSON.stringify({status:t,titles:n,content:i}),s=(0,o.LP)();return(await r.ZP.put("".concat(r.Hv.blog,"/").concat(a),e,{headers:{"Content-Type":"application/json",...s.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},u=async e=>{let{uuid:t}=e;try{let e=(0,o.LP)();return(await r.ZP.delete("".concat(r.Hv.blog,"/").concat(t),{headers:{"Content-Type":"application/json",...e.Authorization}})).data}catch(e){throw Error("Failed to sign in")}}},8524:function(e,t,n){var r=n(7437),o=n(9265),i=n(6631),a=n(4054),s=n(9912),l=n(1288),c=n(2911),u=n(5179),d=n(9207),h=n(2178),p=n(6729),x=n(3755),f=n(8358),g=n(8023),m=n(9343),j=n(7776),Z=n(2533);let b=(0,g.ZP)(c.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});t.Z=e=>{let{isOpen:t,refreshData:n}=e,c=(0,u.Z)("(min-width:600px)"),g=(0,m.cI)({defaultValues:{status:"",titles:"",content:""}});console.log("methods",g.watch());let C=g.watch(),w=g.handleSubmit(async e=>{(await (0,Z.sS)({...e})).success&&(j.A.success("Your blog has been created."),t.onFalse(),n())}),y=!!C.content&&!!C.status&&!!C.titles;return(0,r.jsx)(i.Z,{methods:g,onSubmit:w,children:(0,r.jsx)(b,{onClose:t.onToggle,"aria-labelledby":"customized-dialog-title",open:t.value,sx:{overflowX:"hidden"},children:(0,r.jsx)(o.a,{children:(0,r.jsxs)(d.Z,{width:c?"500px":"300px",children:[(0,r.jsx)(h.Z,{sx:{m:0,pt:2},id:"customized-dialog-title",children:"Create Post"}),(0,r.jsx)(p.Z,{"aria-label":"close",onClick:()=>{t.onToggle()},sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,r.jsx)(l.Z,{})}),(0,r.jsxs)(d.Z,{direction:"column",width:1,spacing:2,padding:2,children:[(0,r.jsx)(a.F,{name:"status",options:v.map(e=>e)||[],getOptionLabel:e=>e,label:"Choose a community"}),(0,r.jsx)(s.Z,{name:"titles",multiline:!0,label:"Title"}),(0,r.jsx)(s.Z,{name:"content",multiline:!0,rows:4,label:"What’s on your mind..."}),(0,r.jsxs)(d.Z,{width:1,direction:c?"row":"column",spacing:1,justifyContent:"flex-end",children:[(0,r.jsx)(x.Z,{minWidth:c?"100px":1,children:(0,r.jsx)(f.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,onClick:()=>g.reset(),children:"Cancel"})}),(0,r.jsx)(x.Z,{minWidth:c?"100px":1,children:(0,r.jsx)(f.Z,{variant:"contained",sx:{color:"#fff",bgcolor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,disabled:!y,type:"submit",onClick:w,children:"Post"})})]})]})]})})})})};let v=["History","Food","Pets","Health","Fashion","Exercise","Others"]},6078:function(e,t,n){var r=n(7437);n(2265),t.Z=e=>{let{text:t,keyword:n}=e;if(!n)return(0,r.jsx)(r.Fragment,{children:t});let o=RegExp("(".concat(n,")"),"gi"),i=t.split(o);return(0,r.jsx)(r.Fragment,{children:i.map((e,t)=>e.toLowerCase()===n.toLowerCase()?(0,r.jsx)("span",{style:{backgroundColor:"#C5A365"},children:e},t):(0,r.jsx)("span",{children:e},t))})}},9520:function(e,t,n){n.d(t,{Q:function(){return T},default:function(){return L}});var r=n(7437),o=n(172),i=n(1313),a=n(7237),s=n(9207),l=n(4962),c=n(6729),u=n(4075),d=n(8358),h=n(3130),p=n(2490),x=n(8996),f=n(2265),g=n(8877),m=n(7132),j=n(8075),Z=n(5591),b=n(6389),v=n(5511),C=n(3755),w=n(3555),y=n(6463),k=n(6078),P=e=>{let{data:t,search:n}=e,i=(0,y.useRouter)(),a=e=>"/home/".concat(e),l=(0,f.useCallback)(e=>{i.push(a(e))},[i]);return(0,r.jsx)(Z.Z,{sx:{borderRadius:"12px"},children:null==t?void 0:t.map((e,t)=>(0,r.jsxs)(s.Z,{sx:{p:4,borderTop:0==t?"0":"solid 1px #BBC2C0 "},spacing:2,onClick:()=>l(e.uuid),children:[(0,r.jsx)(s.Z,{direction:"row",justifyContent:"space-between",width:1,children:(0,r.jsxs)(s.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,r.jsx)(b.Z,{sx:{width:"31px",height:"31px"},src:"/image/user.png"}),(0,r.jsx)(v.Z,{sx:{fontSize:"14px",fontWeight:500},color:"gray",children:e.user.userName})]})}),(0,r.jsx)(C.Z,{children:(0,r.jsx)(w.Z,{size:"small",label:e.status})}),(0,r.jsxs)(C.Z,{children:[(0,r.jsx)(v.Z,{sx:{fontSize:"16px",fontWeight:600},children:(0,r.jsx)(k.Z,{text:e.titles,keyword:n})}),(0,r.jsx)(v.Z,{sx:{fontSize:"12px",fontWeight:400,display:"-webkit-box",overflow:"hidden",WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},children:(0,r.jsx)(k.Z,{text:e.content,keyword:n})})]}),(0,r.jsxs)(s.Z,{spacing:.5,direction:"row",alignItems:"center",sx:{color:"#939494","&:hover":{color:"#000",cursor:"pointer"}},onClick:()=>l(e.uuid),children:[(0,r.jsx)(o.Z,{icon:"tabler:message-circle",sx:{width:"16px",height:"16px"}}),(0,r.jsxs)(v.Z,{sx:{fontSize:"12px"},children:[e.commentCount," Comments"]})]})]},t))})},A=n(8524),S=n(581),L=e=>{let t=(0,S.k)(),[n,Z]=(0,f.useState)("Community"),{data:b,refreshData:v}=function(e){let{value:t}=e,n=[g.Hv.blog,{params:{status:t||""}}],{data:r,isLoading:o,error:i,isValidating:a}=(0,m.ZP)(n,g._i);return(0,f.useMemo)(()=>({data:r||[],isListsLoading:o,isListsError:i,isListsValidating:a,refreshData:()=>(0,j.j)(n)}),[r,i,o,a,n])}({value:"Community"===n?"":n}),C=(0,i.Z)(),w=f.useRef(null),[y,k]=(0,f.useState)(""),L=(0,f.useCallback)(e=>{Z(e),C.onClose(),v()},[Z,C,v]);return(0,f.useEffect)(()=>{t.value||v()},[t.value]),(0,r.jsxs)(s.Z,{sx:{width:"100%",padding:4},spacing:4,children:[(0,r.jsx)(A.Z,{isOpen:t,refreshData:v}),(0,r.jsxs)(s.Z,{sx:{flexDirection:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",gap:{xs:2,sm:2}},children:[(0,r.jsxs)(l.Z,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:1,borderRadius:"8px",border:" solid 1px #49A569"},children:[(0,r.jsx)(c.Z,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)(u.ZP,{placeholder:"Search ",sx:{ml:1,flex:1},onChange:e=>k(e.target.value)})]}),(0,r.jsxs)(s.Z,{direction:"row",children:[(0,r.jsx)(d.Z,{ref:w,id:"composition-button","aria-haspopup":"true",sx:{color:"#000",width:"150px",textTransform:"none"},onClick:C.onOpen,endIcon:(0,r.jsx)(x.E.div,{animate:{rotate:C.open?180:0},transition:{duration:.1,ease:"easeInOut"},children:(0,r.jsx)(s.Z,{alignItems:"center ",justifyContent:"center",children:(0,r.jsx)(o.Z,{icon:"iconamoon:arrow-down-2",sx:{width:"20px",height:"20px"}})})}),children:n}),(0,r.jsx)(h.ZP,{open:!!C.open,anchorEl:C.open,onClose:C.onClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:T.map((e,t)=>(0,r.jsx)(p.Z,{onClick:()=>L(e),children:e},t))}),(0,r.jsx)(d.Z,{variant:"contained",sx:{bgcolor:"#49A569",textTransform:"none"},endIcon:(0,r.jsx)(o.Z,{icon:"material-symbols-light:add",sx:{width:"20px",height:"20px"}}),onClick:()=>{t.onTrue()},children:"Create"})]})]}),(0,r.jsx)(P,{data:b.data,search:y})]})};let T=["Community","History","Food","Pets","Health","Fashion","Exercise","Others"]},8877:function(e,t,n){n.d(t,{ZP:function(){return a},Hv:function(){return l},_i:function(){return s}});var r=n(8472),o=n(2624);let i=r.default.create({baseURL:"https://api-blog-nestjs.up.railway.app/"});i.interceptors.response.use(e=>e,e=>Promise.reject(e.response&&e.response.data||"Something went wrong!"));var a=i;let s=async e=>{try{let[t,n={}]=Array.isArray(e)?e:[e,{}],r=(0,o.LP)(),a={...n.headers,...r&&r.Authorization};return(await i.get(t,{...n,headers:a})).data}catch(e){if(r.default.isAxiosError(e)){var t,n,a;console.error("❌ Axios Error:"),console.error("URL:",null===(t=e.config)||void 0===t?void 0:t.url),console.error("Status:",null===(n=e.response)||void 0===n?void 0:n.status),console.error("Data:",null===(a=e.response)||void 0===a?void 0:a.data)}throw e}},l={user:"api/user",blog:"api/blog"}},2624:function(e,t,n){n.d(t,{A2:function(){return i},LP:function(){return a},o4:function(){return o}});var r=n(2649);let o=e=>{r.Z.set("_jwt_token",e,{expires:1/24,path:"/"})},i=()=>{r.Z.set("_jwt_token","")},a=()=>{let e=r.Z.get("_jwt_token");return{Authorization:{Authorization:"Bearer ".concat(e)},token:e}}}}]);