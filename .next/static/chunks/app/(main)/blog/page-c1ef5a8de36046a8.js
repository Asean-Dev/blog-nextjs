(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{1699:function(e,t,n){Promise.resolve().then(n.bind(n,565))},565:function(e,t,n){"use strict";n.d(t,{default:function(){return X}});var s=n(7437),i=n(172),o=n(581),l=n(1313),r=n(7237),a=n(9207),c=n(4962),d=n(6729),x=n(4075),h=n(8358),u=n(3130),p=n(2490),m=n(6766),j=n(2265),g=n(8524),f=n(9520),Z=n(8877),b=n(7132),w=n(8075),C=n(9265),y=n(6631),k=n(4054),v=n(9912),T=n(1288),W=n(2911),O=n(5179),S=n(2178),A=n(3755),E=n(8023),I=n(9343),z=n(7776),D=n(2533);let P=(0,E.ZP)(W.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});var _=e=>{let{isOpen:t,refreshData:n,uuid:i}=e,[o,l]=(0,j.useState)(),r=(0,I.cI)({defaultValues:{status:"",titles:"",content:""}}),c=r.watch(),x=async()=>{let e=await (0,D.TZ)({uuid:i});e.data&&(l(e.data),r.setValue("status",e.data.status),r.setValue("titles",e.data.titles),r.setValue("content",e.data.content))};(0,j.useEffect)(()=>{i&&t.value&&x()},[i,t]);let u=(0,O.Z)("(min-width:600px)");console.log("methods",r.watch());let p=r.handleSubmit(async e=>{console.log("data",e),(await (0,D.XP)({...e,uuid:i})).success&&(z.A.success("Your blog has been edited."),t.onFalse(),n())}),m=!!c.content&&!!c.status&&!!c.titles;return(0,s.jsx)(P,{onClose:t.onToggle,"aria-labelledby":"customized-dialog-title",open:t.value,sx:{overflowX:"hidden"},children:(0,s.jsx)(y.Z,{methods:r,onSubmit:p,children:(0,s.jsx)(C.a,{children:(0,s.jsxs)(a.Z,{width:u?"500px":"350px",children:[(0,s.jsx)(S.Z,{sx:{m:0,pt:2},id:"customized-dialog-title",children:"Edit Post"}),(0,s.jsx)(d.Z,{"aria-label":"close",onClick:()=>{t.onToggle()},sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,s.jsx)(T.Z,{})}),(0,s.jsxs)(a.Z,{direction:"column",width:1,spacing:2,padding:2,children:[(0,s.jsx)(k.F,{name:"status",options:F.map(e=>e)||[],getOptionLabel:e=>e,label:"Choose a community"}),(0,s.jsx)(v.Z,{name:"titles",multiline:!0,label:"Title"}),(0,s.jsx)(v.Z,{name:"content",multiline:!0,rows:4,label:"Whatâ€™s on your mind..."}),(0,s.jsxs)(a.Z,{width:1,direction:u?"row":"column",spacing:1,justifyContent:"flex-end",children:[(0,s.jsx)(A.Z,{minWidth:u?"100px":1,children:(0,s.jsx)(h.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,onClick:()=>r.reset(),children:"Cancel"})}),(0,s.jsx)(A.Z,{minWidth:u?"100px":1,children:(0,s.jsx)(h.Z,{variant:"contained",sx:{color:"#fff",bgcolor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,disabled:!m,type:"submit",onClick:p,children:"Confirm"})})]})]})]})})})})};let F=["History","Food","Pets","Health","Fashion","Exercise","Others"];var L=n(5591),R=n(5511),V=n(6389),M=n(3555),N=n(6463),B=n(6078),H=e=>{let{data:t,search:n,setUuid:l,uuid:r,isEditOpen:c,refreshData:x}=e,u=(0,o.k)(),p=(0,N.useRouter)(),m=(0,O.Z)("(min-width:600px)"),g=(0,j.useCallback)(e=>{p.push("home/".concat(e))},[p]),f=(0,j.useCallback)(async()=>{(await (0,D.To)({uuid:r})).success&&(z.A.success("Your blog has been deleted."),u.onFalse(),x())},[r]),Z=(0,j.useCallback)(async()=>{u.onFalse()},[]);return(0,s.jsxs)(L.Z,{sx:{borderRadius:"12px"},children:[(0,s.jsx)(W.Z,{open:u.value,keepMounted:!0,onClose:u.onToggle,"aria-describedby":"alert-dialog-slide-description",children:(0,s.jsxs)(a.Z,{p:4,alignItems:"center",width:1,spacing:2,sx:{borderRadius:"12px"},children:[(0,s.jsxs)(A.Z,{children:[(0,s.jsxs)(R.Z,{sx:{fontSize:"h6",fontWeight:600,textAlign:"center"},children:["Please confirm if you wish to",(0,s.jsx)("br",{})," delete the post"]}),(0,s.jsxs)(R.Z,{sx:{fontSize:"14px",fontWeight:400,textAlign:"center"},children:["Are you sure you want to delete the post? ",(0,s.jsx)("br",{}),"Once deleted, it cannot be recovered."]})]}),m?(0,s.jsxs)(a.Z,{direction:"row",width:1,spacing:2,children:[(0,s.jsx)(h.Z,{variant:"outlined",color:"inherit",fullWidth:!0,sx:{textTransform:"none"},onClick:Z,children:"Cancel"}),(0,s.jsx)(h.Z,{variant:"contained",color:"error",fullWidth:!0,sx:{textTransform:"none"},onClick:f,children:"Delete"})]}):(0,s.jsxs)(a.Z,{direction:"column",width:1,spacing:2,children:[(0,s.jsx)(h.Z,{variant:"contained",color:"error",fullWidth:!0,sx:{textTransform:"none"},onClick:f,children:"Delete"}),(0,s.jsx)(h.Z,{variant:"outlined",color:"inherit",fullWidth:!0,sx:{textTransform:"none"},onClick:Z,children:"Cancel"})]})]})}),null==t?void 0:t.map((e,t)=>(0,s.jsxs)(a.Z,{sx:{p:4,borderTop:0==t?"0":"solid 1px #BBC2C0 "},spacing:2,children:[(0,s.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",width:1,children:[(0,s.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,s.jsx)(V.Z,{sx:{width:"31px",height:"31px"},src:"/image/user.png"}),(0,s.jsx)(R.Z,{sx:{fontSize:"14px",fontWeight:500},color:"gray",children:e.user.userName})]}),(0,s.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,s.jsx)(d.Z,{onClick:()=>{l(e.uuid),c.onTrue()},children:(0,s.jsx)("img",{style:{width:"16px",height:"16px"},src:"/logo/edit-03.png"})}),(0,s.jsx)(d.Z,{onClick:()=>{l(e.uuid),u.onTrue()},children:(0,s.jsx)("img",{style:{width:"16px",height:"16px"},src:"/logo/trash-01.png"})})]})]}),(0,s.jsx)(A.Z,{children:(0,s.jsx)(M.Z,{size:"small",label:e.status})}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(R.Z,{sx:{fontSize:"16px",fontWeight:600},children:(0,s.jsx)(B.Z,{text:e.titles,keyword:n})}),(0,s.jsx)(R.Z,{sx:{fontSize:"12px",fontWeight:400,display:"-webkit-box",overflow:"hidden",WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},children:(0,s.jsx)(B.Z,{text:e.content,keyword:n})})]}),(0,s.jsxs)(a.Z,{spacing:.5,direction:"row",alignItems:"center",sx:{color:"#939494","&:hover":{color:"#000",cursor:"pointer"}},onClick:()=>g(e.uuid),children:[(0,s.jsx)(i.Z,{icon:"tabler:message-circle",sx:{width:"16px",height:"16px"}}),(0,s.jsxs)(R.Z,{sx:{fontSize:"12px"},children:[e.commentCount," Comments"]})]})]},t))]})},X=e=>{let t=(0,o.k)(),n=(0,o.k)(),[C,y]=(0,j.useState)("Community"),[k,v]=(0,j.useState)(""),{data:T,refreshData:W}=function(e){let{value:t}=e,n=["".concat(Z.Hv.blog,"/our"),{params:{status:t||""}}],{data:s,isLoading:i,error:o,isValidating:l}=(0,b.ZP)(n,Z._i);return(0,j.useMemo)(()=>({data:s||[],isListsLoading:i,isListsError:o,isListsValidating:l,refreshData:()=>(0,w.j)(n)}),[s,o,i,l,n])}({value:"Community"===C?"":C}),O=(0,l.Z)(),S=j.useRef(null),[A,E]=(0,j.useState)(""),I=(0,j.useCallback)(e=>{y(e),O.onClose(),W()},[y,O,W]);return(0,j.useEffect)(()=>{t.value||W()},[t.value]),(0,s.jsxs)(a.Z,{sx:{width:"100%",padding:4},spacing:4,children:[(0,s.jsx)(_,{isOpen:n,refreshData:W,uuid:k}),(0,s.jsx)(g.Z,{isOpen:t,refreshData:W}),(0,s.jsxs)(a.Z,{sx:{flexDirection:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",gap:{xs:2,sm:2}},children:[(0,s.jsxs)(c.Z,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:1,borderRadius:"8px",border:" solid 1px #49A569"},children:[(0,s.jsx)(d.Z,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(x.ZP,{placeholder:"Search ",sx:{ml:1,flex:1},onChange:e=>E(e.target.value)})]}),(0,s.jsxs)(a.Z,{direction:"row",sx:{mt:0},children:[(0,s.jsx)(h.Z,{ref:S,id:"composition-button","aria-haspopup":"true",sx:{color:"#000",width:"150px",textTransform:"none"},onClick:O.onOpen,endIcon:(0,s.jsx)(m.E.div,{animate:{rotate:O.open?180:0},transition:{duration:.1,ease:"easeInOut"},children:(0,s.jsx)(a.Z,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(i.Z,{icon:"iconamoon:arrow-down-2",sx:{width:"20px",height:"20px"}})})}),children:C}),(0,s.jsx)(u.ZP,{open:!!O.open,anchorEl:O.open,onClose:O.onClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:f.Q.map((e,t)=>(0,s.jsx)(p.Z,{onClick:()=>I(e),children:e},t))}),(0,s.jsx)(h.Z,{variant:"contained",sx:{bgcolor:"#49A569",textTransform:"none"},endIcon:(0,s.jsx)(i.Z,{icon:"material-symbols-light:add",sx:{width:"20px",height:"20px"}}),onClick:()=>{t.onTrue()},children:"Create"})]})]}),(0,s.jsx)(H,{data:T.data,search:A,setUuid:v,uuid:k,isEditOpen:n,refreshData:W})]})}}},function(e){e.O(0,[776,254,799,998,775,343,167,845,520,971,23,744],function(){return e(e.s=1699)}),_N_E=e.O()}]);