(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{3925:function(t,e,n){Promise.resolve().then(n.bind(n,135)),Promise.resolve().then(n.bind(n,3205)),Promise.resolve().then(n.bind(n,1282))},135:function(t,e,n){"use strict";n.r(e),n.d(e,{AuthGuard:function(){return l}});var o=n(7437),r=n(2624),i=n(6463),a=n(2265),s=n(7776);function l(t){let{children:e}=t,n=(0,i.useRouter)(),l=(0,i.usePathname)(),c=(0,i.useSearchParams)(),u=(0,r.LP)(),d=(0,a.useCallback)((t,e)=>{let n=new URLSearchParams(c.toString());return n.set(t,e),n.toString()},[c]);return(0,a.useEffect)(()=>{if(u.token)return;let t="/?".concat(d("returnTo",l));s.A.success("You're unauthorized. Please sign in to continue."),n.replace(t)},[u.token]),(0,o.jsx)(o.Fragment,{children:e})}},3205:function(t,e,n){"use strict";n.r(e),n.d(e,{GuestGuard:function(){return s}});var o=n(7437),r=n(2624),i=n(6463),a=n(2265);function s(t){let{children:e}=t,n=(0,i.useRouter)(),s=(0,i.useSearchParams)().get("returnTo")||"/home",l=(0,r.LP)();return(0,a.useEffect)(()=>{l&&l.token&&n.replace(s)},[l.token]),(0,o.jsx)(o.Fragment,{children:e})}},172:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var o=n(7437),r=n(2265),i=n(1359),a=n(3755);let s=(0,r.forwardRef)((t,e)=>{let{icon:n,width:r=20,sx:s,...l}=t;return(0,o.jsx)(a.Z,{ref:e,component:i.JO,className:"component-iconify",icon:n,sx:{width:r,height:r,...s},...l})});s.displayName="Iconify";var l=s},581:function(t,e,n){"use strict";n.d(e,{k:function(){return r}});var o=n(2265);function r(t){let[e,n]=(0,o.useState)(!!t);return{value:e,onTrue:(0,o.useCallback)(()=>{n(!0)},[]),onFalse:(0,o.useCallback)(()=>{n(!1)},[]),onToggle:(0,o.useCallback)(()=>{n(t=>!t)},[]),setValue:n}}},2533:function(t,e,n){"use strict";n.d(e,{TZ:function(){return a},To:function(){return u},XP:function(){return c},bN:function(){return s},sS:function(){return l}});var o=n(8877),r=n(2624),i=n(6623);let a=async t=>{let{uuid:e}=t;try{let t=(0,r.LP)();return(await o.ZP.get("".concat(o.Hv.blog,"/").concat(e),{headers:{"Content-Type":"application/json",...t.Authorization}})).data}catch(t){if(i.IZ(t)){var n;throw console.error("Axios error:",(null===(n=t.response)||void 0===n?void 0:n.data)||t.message),Error("Failed to fetch blog data")}throw t}},s=async t=>{let{blogUuid:e,comment:n}=t;try{let t=JSON.stringify({blogUuid:e,comment:n}),i=(0,r.LP)();return(await o.ZP.post("".concat(o.Hv.blog,"/create-comment"),t,{headers:{"Content-Type":"application/json",...i.Authorization}})).data}catch(t){throw Error("Failed to sign in")}},l=async t=>{let{status:e,titles:n,content:i}=t;try{let t=JSON.stringify({status:e,titles:n,content:i}),a=(0,r.LP)();return(await o.ZP.post("".concat(o.Hv.blog),t,{headers:{"Content-Type":"application/json",...a.Authorization}})).data}catch(t){throw Error("Failed to sign in")}},c=async t=>{let{status:e,titles:n,content:i,uuid:a}=t;try{let t=JSON.stringify({status:e,titles:n,content:i}),s=(0,r.LP)();return(await o.ZP.put("".concat(o.Hv.blog,"/").concat(a),t,{headers:{"Content-Type":"application/json",...s.Authorization}})).data}catch(t){throw Error("Failed to sign in")}},u=async t=>{let{uuid:e}=t;try{let t=(0,r.LP)();return(await o.ZP.delete("".concat(o.Hv.blog,"/").concat(e),{headers:{"Content-Type":"application/json",...t.Authorization}})).data}catch(t){throw Error("Failed to sign in")}}},1282:function(t,e,n){"use strict";n.d(e,{default:function(){return E}});var o=n(7437),r=n(172),i=n(2737),a=n.n(i),s=n(1470),l=n.n(s);a().extend(l());let c=t=>{let e=a()(),n=a()(t),o=e.diff(n,"minute"),r=e.diff(n,"hour"),i=e.diff(n,"day"),s=e.diff(n,"month"),l=e.diff(n,"year");return o<1?"now":o<60?"".concat(o,"m ago"):r<24?"".concat(r,"h ago"):i<30?"".concat(i,"d ago"):s<12?"".concat(s,"mo ago"):"".concat(l,"y ago")};var u=n(2911),d=n(5179),h=n(9207),f=n(6389),x=n(5511),p=n(3755),g=n(3555),m=n(7799),b=n(8358),j=n(2178),v=n(6729),Z=n(2265),w=n(1200),y=n(8023),C=t=>{let{comment:e}=t;return(0,o.jsxs)(h.Z,{children:[(0,o.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(f.Z,{sx:{width:"24px",height:"24px"}}),(0,o.jsxs)(x.Z,{sx:{fontSize:"14px",fontWeight:500},children:[null==e?void 0:e.user.userName," ",(0,o.jsxs)(x.Z,{component:"span",sx:{fontSize:"12px",fontWeight:500},color:"gray",children:[" ",c(null==e?void 0:e.createdAt)]})]})]}),(0,o.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(f.Z,{sx:{width:"24px",height:"24px",opacity:0}}),(0,o.jsx)(x.Z,{sx:{fontSize:"12px",fontWeight:400},children:null==e?void 0:e.comment})]})]})},A=n(2533),k=n(581),P=n(6463),S=n(1288);let T=(0,y.ZP)(u.Z)(t=>{let{theme:e}=t;return{"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}}),z=(0,y.ZP)(w.Z)(t=>{let{theme:e}=t;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}});var E=t=>{let{uuid:e}=t,n=(0,k.k)(!0);console.log("isAddComment",n.value);let i=(0,P.useRouter)(),a=(0,d.Z)("(min-width:600px)"),[s,l]=(0,Z.useState)(),[u,w]=(0,Z.useState)(""),y=async()=>{let t=await (0,A.TZ)({uuid:e});t.data&&l(t.data)};(0,Z.useEffect)(()=>{y()},[e]);let E=(0,Z.useCallback)(async()=>{(await (0,A.bN)({comment:u,blogUuid:e})).success&&(y(),n.onTrue(),w(""))},[u,e]),W=(0,o.jsxs)(h.Z,{spacing:2,children:[(0,o.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,o.jsx)(f.Z,{sx:{width:"31px",height:"31px"},src:"/image/user.png"})}),(0,o.jsxs)(x.Z,{sx:{fontSize:"14px",fontWeight:500},children:[null==s?void 0:s.user.userName," ",(0,o.jsxs)(x.Z,{component:"span",sx:{fontSize:"12px",fontWeight:500},color:"gray",children:[" ",c(null==s?void 0:s.createdAt)]})]})]}),(0,o.jsx)(p.Z,{children:(0,o.jsx)(g.Z,{size:"small",label:null==s?void 0:s.status})}),(0,o.jsxs)(p.Z,{children:[(0,o.jsx)(x.Z,{sx:{fontSize:"16px",fontWeight:600},children:null==s?void 0:s.titles}),(0,o.jsx)(x.Z,{sx:{fontSize:"12px",fontWeight:400},children:null==s?void 0:s.content})]}),(0,o.jsxs)(h.Z,{spacing:.5,direction:"row",alignItems:"center",sx:{color:"#939494"},children:[(0,o.jsx)(r.Z,{icon:"tabler:message-circle",sx:{width:"16px",height:"16px"}}),(0,o.jsxs)(x.Z,{sx:{fontSize:"12px"},children:[null==s?void 0:s.blogComment.length," Comments"]})]})]}),L=(0,o.jsxs)(h.Z,{direction:"column",width:1,spacing:2,children:[(0,o.jsx)(m.Z,{id:"outlined-multiline-static",label:"What’s on your mind...",multiline:!0,rows:4,color:"primary",value:u,onChange:t=>w(t.target.value),sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}}}),(0,o.jsxs)(h.Z,{width:1,direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,o.jsx)(p.Z,{children:(0,o.jsx)(b.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none",minWidth:100},onClick:()=>{w(""),n.onToggle()},children:"Cancel"})}),(0,o.jsx)(p.Z,{children:(0,o.jsx)(b.Z,{variant:"contained",sx:{color:"#fff",bgcolor:"#49A569",textTransform:"none",minWidth:100},disabled:!u,onClick:E,children:"Post"})})]})]}),_=()=>{n.onToggle(),F.onToggle()},F=(0,k.k)(!0),N=(0,o.jsxs)(T,{onClose:_,"aria-labelledby":"customized-dialog-title",open:!n.value,children:[(0,o.jsx)(j.Z,{sx:{m:0,pt:5,minWidth:"95vw"},id:"customized-dialog-title",children:"Add Comments"}),(0,o.jsx)(v.Z,{"aria-label":"close",onClick:_,sx:t=>({position:"absolute",right:8,top:8,color:t.palette.grey[500]}),children:(0,o.jsx)(S.Z,{})}),(0,o.jsxs)(h.Z,{direction:"column",width:1,spacing:2,padding:2,children:[(0,o.jsx)(m.Z,{id:"outlined-multiline-static",label:"What’s on your mind...",multiline:!0,rows:4,color:"primary",value:u,onChange:t=>w(t.target.value),sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}}}),(0,o.jsxs)(h.Z,{width:1,direction:"column",spacing:1,children:[(0,o.jsx)(b.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none",minWidth:100},onClick:()=>w(""),children:"Cancel"}),(0,o.jsx)(b.Z,{variant:"contained",sx:{color:"#fff",bgcolor:"#49A569",textTransform:"none",minWidth:100},disabled:!u,onClick:E,children:"Post"})]})]})]});return(0,o.jsxs)(h.Z,{height:"100vh",width:1,bgcolor:"#FFF",p:4,spacing:4,children:[(0,o.jsx)(p.Z,{children:(0,o.jsx)(b.Z,{variant:"contained",onClick:()=>i.back(),sx:{backgroundColor:"#D8E9E4",minWidth:40,width:40,height:40,padding:0,borderRadius:"50%",textTransform:"none",boxShadow:"none","&:hover":{backgroundColor:"#c9ded8"}},children:(0,o.jsx)(r.Z,{icon:"ep:back",sx:{color:"#000"}})})}),W,n.value?(0,o.jsx)(p.Z,{children:(0,o.jsx)(b.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none"},onClick:n.onFalse,children:"Add Comments"})}):a?L:N,(0,o.jsx)(p.Z,{children:null==s?void 0:s.blogComment.map((t,e)=>(0,o.jsx)(C,{comment:t},e))})]})}},8877:function(t,e,n){"use strict";n.d(e,{ZP:function(){return a},Hv:function(){return l},_i:function(){return s}});var o=n(8472),r=n(2624);let i=o.default.create({baseURL:"https://api-blog-nestjs.up.railway.app/"});i.interceptors.response.use(t=>t,t=>Promise.reject(t.response&&t.response.data||"Something went wrong!"));var a=i;let s=async t=>{try{let[e,n={}]=Array.isArray(t)?t:[t,{}],o=(0,r.LP)(),a={...n.headers,...o&&o.Authorization};return(await i.get(e,{...n,headers:a})).data}catch(t){if(o.default.isAxiosError(t)){var e,n,a;console.error("❌ Axios Error:"),console.error("URL:",null===(e=t.config)||void 0===e?void 0:e.url),console.error("Status:",null===(n=t.response)||void 0===n?void 0:n.status),console.error("Data:",null===(a=t.response)||void 0===a?void 0:a.data)}throw t}},l={user:"api/user",blog:"api/blog"}},2624:function(t,e,n){"use strict";n.d(e,{A2:function(){return i},LP:function(){return a},o4:function(){return r}});var o=n(2649);let r=t=>{o.Z.set("_jwt_token",t,{expires:1/24,path:"/"})},i=()=>{o.Z.set("_jwt_token","")},a=()=>{let t=o.Z.get("_jwt_token");return{Authorization:{Authorization:"Bearer ".concat(t)},token:t}}}},function(t){t.O(0,[776,254,799,998,775,912,971,23,744],function(){return t(t.s=3925)}),_N_E=t.O()}]);