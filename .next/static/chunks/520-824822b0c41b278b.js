"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{135:function(e,t,n){n.r(t),n.d(t,{AuthGuard:function(){return l}});var o=n(7437),r=n(2624),i=n(6463),s=n(2265),a=n(7776);function l(e){let{children:t}=e,n=(0,i.useRouter)(),l=(0,i.usePathname)(),c=(0,i.useSearchParams)(),u=(0,r.LP)(),d=(0,s.useCallback)((e,t)=>{let n=new URLSearchParams(c.toString());return n.set(e,t),n.toString()},[c]);return(0,s.useEffect)(()=>{if(u.token)return;let e="/?".concat(d("returnTo",l));a.A.success("You're unauthorized. Please sign in to continue."),n.replace(e)},[u.token]),(0,o.jsx)(o.Fragment,{children:t})}},3205:function(e,t,n){n.r(t),n.d(t,{GuestGuard:function(){return a}});var o=n(7437),r=n(2624),i=n(6463),s=n(2265);function a(e){let{children:t}=e,n=(0,i.useRouter)(),a=(0,i.useSearchParams)().get("returnTo")||"/home",l=(0,r.LP)();return(0,s.useEffect)(()=>{l&&l.token&&n.replace(a)},[l.token]),(0,o.jsx)(o.Fragment,{children:t})}},9265:function(e,t,n){n.d(t,{a:function(){return o.AuthGuard}});var o=n(135);n(3205)},6631:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(7437),r=n(9343);function i(e){let{children:t,onSubmit:n,methods:i}=e;return(0,o.jsx)(r.RV,{...i,children:(0,o.jsx)("form",{onSubmit:n,children:t})})}},4054:function(e,t,n){n.d(t,{F:function(){return a}});var o=n(7437),r=n(9343),i=n(7799),s=n(9604);function a(e){let{name:t,label:n,helperText:a,hiddenLabel:l,placeholder:c,...u}=e,{control:d,setValue:h}=(0,r.Gc)();return(0,o.jsx)(r.Qr,{name:t,control:d,render:e=>{var r;let{field:l,fieldState:{error:d}}=e;return(0,o.jsx)(s.Z,{...l,id:"rhf-autocomplete-".concat(t),onChange:(e,n)=>h(t,n,{shouldValidate:!0}),value:null!==(r=l.value)&&void 0!==r?r:null,renderInput:e=>(0,o.jsx)(i.Z,{...e,label:n,variant:"outlined",placeholder:c,error:!!d,helperText:d?null==d?void 0:d.message:a,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}},inputProps:{...e.inputProps,autoComplete:"new-password",form:{autocomplete:"off"}}}),...u})}})}},9912:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(7437),r=n(9343),i=n(7799);function s(e){let{name:t,helperText:n,type:s,...a}=e,{control:l}=(0,r.Gc)();return(0,o.jsx)(r.Qr,{name:t,control:l,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,o.jsx)(i.Z,{...t,fullWidth:!0,type:s,value:"number"===s&&0===t.value?"":t.value,onChange:e=>{"number"===s?t.onChange(Number(e.target.value)):t.onChange(e.target.value)},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#49A569"},"&.Mui-focused fieldset":{borderColor:"#49A569"}},"& .MuiInputLabel-root.Mui-focused":{color:"#49A569"}},error:!!n,...a})}})}},172:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(7437),r=n(2265),i=n(1359),s=n(3755);let a=(0,r.forwardRef)((e,t)=>{let{icon:n,width:r=20,sx:a,...l}=e;return(0,o.jsx)(s.Z,{ref:t,component:i.JO,className:"component-iconify",icon:n,sx:{width:r,height:r,...a},...l})});a.displayName="Iconify";var l=a},581:function(e,t,n){n.d(t,{k:function(){return r}});var o=n(2265);function r(e){let[t,n]=(0,o.useState)(!!e);return{value:t,onTrue:(0,o.useCallback)(()=>{n(!0)},[]),onFalse:(0,o.useCallback)(()=>{n(!1)},[]),onToggle:(0,o.useCallback)(()=>{n(e=>!e)},[]),setValue:n}}},1313:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(2265);function r(){let[e,t]=(0,o.useState)(null);return{open:e,onOpen:(0,o.useCallback)(e=>{t(e.currentTarget)},[]),onClose:(0,o.useCallback)(()=>{t(null)},[]),setOpen:t}}},2533:function(e,t,n){n.d(t,{TZ:function(){return s},To:function(){return u},XP:function(){return c},bN:function(){return a},sS:function(){return l}});var o=n(8877),r=n(2624),i=n(6623);let s=async e=>{let{uuid:t}=e;try{let e=(0,r.LP)();return(await o.ZP.get("".concat(o.Hv.blog,"/").concat(t),{headers:{"Content-Type":"application/json",...e.Authorization}})).data}catch(e){if(i.IZ(e)){var n;throw console.error("Axios error:",(null===(n=e.response)||void 0===n?void 0:n.data)||e.message),Error("Failed to fetch blog data")}throw e}},a=async e=>{let{blogUuid:t,comment:n}=e;try{let e=JSON.stringify({blogUuid:t,comment:n}),i=(0,r.LP)();return(await o.ZP.post("".concat(o.Hv.blog,"/create-comment"),e,{headers:{"Content-Type":"application/json",...i.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},l=async e=>{let{status:t,titles:n,content:i}=e;try{let e=JSON.stringify({status:t,titles:n,content:i}),s=(0,r.LP)();return(await o.ZP.post("".concat(o.Hv.blog),e,{headers:{"Content-Type":"application/json",...s.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},c=async e=>{let{status:t,titles:n,content:i,uuid:s}=e;try{let e=JSON.stringify({status:t,titles:n,content:i}),a=(0,r.LP)();return(await o.ZP.put("".concat(o.Hv.blog,"/").concat(s),e,{headers:{"Content-Type":"application/json",...a.Authorization}})).data}catch(e){throw Error("Failed to sign in")}},u=async e=>{let{uuid:t}=e;try{let e=(0,r.LP)();return(await o.ZP.delete("".concat(o.Hv.blog,"/").concat(t),{headers:{"Content-Type":"application/json",...e.Authorization}})).data}catch(e){throw Error("Failed to sign in")}}},8524:function(e,t,n){var o=n(7437),r=n(9265),i=n(6631),s=n(4054),a=n(9912),l=n(1288),c=n(2911),u=n(5179),d=n(9207),h=n(2178),x=n(6729),p=n(3755),f=n(8358),m=n(8023),g=n(9343),j=n(7776),Z=n(2533);let b=(0,m.ZP)(c.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});t.Z=e=>{let{isOpen:t,refreshData:n}=e,c=(0,u.Z)("(min-width:600px)"),m=(0,g.cI)({defaultValues:{status:"",titles:"",content:""}});console.log("methods",m.watch());let C=m.watch(),w=m.handleSubmit(async e=>{(await (0,Z.sS)({...e})).success&&(j.A.success("Your blog has been created."),t.onFalse(),n())}),y=!!C.content&&!!C.status&&!!C.titles;return(0,o.jsx)(i.Z,{methods:m,onSubmit:w,children:(0,o.jsx)(b,{onClose:t.onToggle,"aria-labelledby":"customized-dialog-title",open:t.value,sx:{overflowX:"hidden"},children:(0,o.jsx)(r.a,{children:(0,o.jsxs)(d.Z,{width:c?"500px":"350px",children:[(0,o.jsx)(h.Z,{sx:{m:0,pt:2},id:"customized-dialog-title",children:"Create Post"}),(0,o.jsx)(x.Z,{"aria-label":"close",onClick:()=>{t.onToggle()},sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,o.jsx)(l.Z,{})}),(0,o.jsxs)(d.Z,{direction:"column",width:1,spacing:2,padding:2,children:[(0,o.jsx)(s.F,{name:"status",options:v.map(e=>e)||[],getOptionLabel:e=>e,label:"Choose a community"}),(0,o.jsx)(a.Z,{name:"titles",multiline:!0,label:"Title"}),(0,o.jsx)(a.Z,{name:"content",multiline:!0,rows:4,label:"What’s on your mind..."}),(0,o.jsxs)(d.Z,{width:1,direction:c?"row":"column",spacing:1,justifyContent:"flex-end",children:[(0,o.jsx)(p.Z,{minWidth:c?"100px":1,children:(0,o.jsx)(f.Z,{variant:"outlined",sx:{color:"#49A569",borderColor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,onClick:()=>m.reset(),children:"Cancel"})}),(0,o.jsx)(p.Z,{minWidth:c?"100px":1,children:(0,o.jsx)(f.Z,{variant:"contained",sx:{color:"#fff",bgcolor:"#49A569",textTransform:"none",minWidth:100},fullWidth:!0,disabled:!y,type:"submit",onClick:w,children:"Post"})})]})]})]})})})})};let v=["History","Food","Pets","Health","Fashion","Exercise","Others"]},6078:function(e,t,n){var o=n(7437);n(2265),t.Z=e=>{let{text:t,keyword:n}=e;if(!n)return(0,o.jsx)(o.Fragment,{children:t});let r=RegExp("(".concat(n,")"),"gi"),i=t.split(r);return(0,o.jsx)(o.Fragment,{children:i.map((e,t)=>e.toLowerCase()===n.toLowerCase()?(0,o.jsx)("span",{style:{backgroundColor:"#C5A365"},children:e},t):(0,o.jsx)("span",{children:e},t))})}},9520:function(e,t,n){n.d(t,{Q:function(){return T},default:function(){return L}});var o=n(7437),r=n(172),i=n(1313),s=n(7237),a=n(9207),l=n(4962),c=n(6729),u=n(4075),d=n(8358),h=n(3130),x=n(2490),p=n(6766),f=n(2265),m=n(8877),g=n(7132),j=n(8075),Z=n(5591),b=n(6389),v=n(5511),C=n(3755),w=n(3555),y=n(6463),k=n(6078),P=e=>{let{data:t,search:n}=e,i=(0,y.useRouter)(),s=e=>"/home/".concat(e),l=(0,f.useCallback)(e=>{i.push(s(e))},[i]);return(0,o.jsx)(Z.Z,{sx:{borderRadius:"12px"},children:null==t?void 0:t.map((e,t)=>(0,o.jsxs)(a.Z,{sx:{p:4,borderTop:0==t?"0":"solid 1px #BBC2C0 "},spacing:2,onClick:()=>l(e.uuid),children:[(0,o.jsx)(a.Z,{direction:"row",justifyContent:"space-between",width:1,children:(0,o.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(b.Z,{sx:{width:"31px",height:"31px"},src:"/image/user.png"}),(0,o.jsx)(v.Z,{sx:{fontSize:"14px",fontWeight:500},color:"gray",children:e.user.userName})]})}),(0,o.jsx)(C.Z,{children:(0,o.jsx)(w.Z,{size:"small",label:e.status})}),(0,o.jsxs)(C.Z,{children:[(0,o.jsx)(v.Z,{sx:{fontSize:"16px",fontWeight:600},children:(0,o.jsx)(k.Z,{text:e.titles,keyword:n})}),(0,o.jsx)(v.Z,{sx:{fontSize:"12px",fontWeight:400,display:"-webkit-box",overflow:"hidden",WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},children:(0,o.jsx)(k.Z,{text:e.content,keyword:n})})]}),(0,o.jsxs)(a.Z,{spacing:.5,direction:"row",alignItems:"center",sx:{color:"#939494","&:hover":{color:"#000",cursor:"pointer"}},onClick:()=>l(e.uuid),children:[(0,o.jsx)(r.Z,{icon:"tabler:message-circle",sx:{width:"16px",height:"16px"}}),(0,o.jsxs)(v.Z,{sx:{fontSize:"12px"},children:[e.commentCount," Comments"]})]})]},t))})},A=n(8524),S=n(581),L=e=>{let t=(0,S.k)(),[n,Z]=(0,f.useState)("Community"),{data:b,refreshData:v}=function(e){let{value:t}=e,n=[m.Hv.blog,{params:{status:t||""}}],{data:o,isLoading:r,error:i,isValidating:s}=(0,g.ZP)(n,m._i);return(0,f.useMemo)(()=>({data:o||[],isListsLoading:r,isListsError:i,isListsValidating:s,refreshData:()=>(0,j.j)(n)}),[o,i,r,s,n])}({value:"Community"===n?"":n}),C=(0,i.Z)(),w=f.useRef(null),[y,k]=(0,f.useState)(""),L=(0,f.useCallback)(e=>{Z(e),C.onClose(),v()},[Z,C,v]);return(0,f.useEffect)(()=>{t.value||v()},[t.value]),(0,o.jsxs)(a.Z,{sx:{width:"100%",padding:4},spacing:4,children:[(0,o.jsx)(A.Z,{isOpen:t,refreshData:v}),(0,o.jsxs)(a.Z,{sx:{flexDirection:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",gap:{xs:2,sm:2}},children:[(0,o.jsxs)(l.Z,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:1,borderRadius:"8px",border:" solid 1px #49A569"},children:[(0,o.jsx)(c.Z,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,o.jsx)(s.Z,{})}),(0,o.jsx)(u.ZP,{placeholder:"Search ",sx:{ml:1,flex:1},onChange:e=>k(e.target.value)})]}),(0,o.jsxs)(a.Z,{direction:"row",children:[(0,o.jsx)(d.Z,{ref:w,id:"composition-button","aria-haspopup":"true",sx:{color:"#000",width:"150px",textTransform:"none"},onClick:C.onOpen,endIcon:(0,o.jsx)(p.E.div,{animate:{rotate:C.open?180:0},transition:{duration:.1,ease:"easeInOut"},children:(0,o.jsx)(a.Z,{alignItems:"center ",justifyContent:"center",children:(0,o.jsx)(r.Z,{icon:"iconamoon:arrow-down-2",sx:{width:"20px",height:"20px"}})})}),children:n}),(0,o.jsx)(h.ZP,{open:!!C.open,anchorEl:C.open,onClose:C.onClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:T.map((e,t)=>(0,o.jsx)(x.Z,{onClick:()=>L(e),children:e},t))}),(0,o.jsx)(d.Z,{variant:"contained",sx:{bgcolor:"#49A569",textTransform:"none"},endIcon:(0,o.jsx)(r.Z,{icon:"material-symbols-light:add",sx:{width:"20px",height:"20px"}}),onClick:()=>{t.onTrue()},children:"Create"})]})]}),(0,o.jsx)(P,{data:b.data,search:y})]})};let T=["Community","History","Food","Pets","Health","Fashion","Exercise","Others"]},8877:function(e,t,n){n.d(t,{ZP:function(){return s},Hv:function(){return l},_i:function(){return a}});var o=n(8472),r=n(2624);let i=o.default.create({baseURL:"http://localhost:3441/"});i.interceptors.response.use(e=>e,e=>Promise.reject(e.response&&e.response.data||"Something went wrong!"));var s=i;let a=async e=>{try{let[t,n={}]=Array.isArray(e)?e:[e,{}],o=(0,r.LP)(),s={...n.headers,...o&&o.Authorization};return(await i.get(t,{...n,headers:s})).data}catch(e){if(o.default.isAxiosError(e)){var t,n,s;console.error("❌ Axios Error:"),console.error("URL:",null===(t=e.config)||void 0===t?void 0:t.url),console.error("Status:",null===(n=e.response)||void 0===n?void 0:n.status),console.error("Data:",null===(s=e.response)||void 0===s?void 0:s.data)}throw e}},l={user:"api/user",blog:"api/blog"}},2624:function(e,t,n){n.d(t,{A2:function(){return i},LP:function(){return s},o4:function(){return r}});var o=n(2649);let r=e=>{o.Z.set("_jwt_token",e,{expires:1/24,path:"/"})},i=()=>{o.Z.set("_jwt_token","")},s=()=>{let e=o.Z.get("_jwt_token");return{Authorization:{Authorization:"Bearer ".concat(e)},token:e}}}}]);